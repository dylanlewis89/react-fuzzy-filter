!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define("react-fuzzy-filter",["react"],e):t.ReactFuzzyFilter=e(t.React)}(this,function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t["default"]:t}function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(e){function r(t,r){var n=r(t);"string"==typeof n&&(t=n),e.next(t)}var n=function(t){function e(){var t,n,o,i;a(this,e);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=o=b(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(c))),o.updateValue=Bt(r,o.props.debounceTime),o.handleChange=function(t){var e=t.target.value;o.props.debounceTime>0?o.updateValue(e,o.props.onChange):r(e,o.props.onChange)},i=n,b(o,i)}return f(e,t),p(e,[{key:"componentDidMount",value:function(){r(this.props.initialSearch,this.props.onChange)}},{key:"componentWillReceiveProps",value:function(t){this.updateValue=Bt(r,t.debounceTime)}},{key:"render",value:function(){return s.createElement("input",h({className:this.props.classPrefix+"__input",onChange:this.handleChange,defaultValue:this.props.initialSearch},this.props.inputProps))}}]),e}(t.Component);return n.displayName="InputFilter",n.propTypes={classPrefix:t.PropTypes.string.isRequired,initialSearch:t.PropTypes.string,inputProps:t.PropTypes.object,onChange:t.PropTypes.func,debounceTime:t.PropTypes.number},n.defaultProps={classPrefix:"react-fuzzy-filter",inputProps:{},onChange:function(){},debounceTime:0},n}function o(e){var r=function(t){function r(){var t,e,n,o;a(this,r);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return e=n=b(this,(t=Object.getPrototypeOf(r)).call.apply(t,[this].concat(s))),n.state={search:null},o=e,b(n,o)}return f(r,t),p(r,[{key:"componentDidMount",value:function(){var t=this;this.subscription=e.subscribe(function(e){return t.setState({search:e})})}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"prefilterItems",value:function(t){var e=this.props.items;return this.props.prefilters.forEach(function(r){var n=r.regex,o=r.handler,i=t.match(n)||[];t=t.replace(n,"").trim(),i.forEach(function(t){e=o(t,e,Wt)})}),{items:e,search:t}}},{key:"filterItems",value:function(){var t=this.prefilterItems(this.state.search||""),e=t.items,r=t.search;if(""===r.trim())return this.props.defaultAllItems?e:[];var n=new Wt(e,this.props.fuseConfig);return n.search(r)}},{key:"renderItems",value:function(t){var e=this;return t.map(function(t,r){return e.props.renderItem(t,r)})}},{key:"render",value:function(){var t=this.filterItems(),e=this.renderItems(t);return"function"==typeof this.props.renderContainer?this.props.renderContainer(e,t):this.props.wrapper?s.createElement(this.props.wrapper,this.props.wrapperProps,e):s.createElement("span",{className:this.props.classPrefix+"__results-container"},e)}}]),r}(t.Component);return r.displayName="FilterResults",r.propTypes={renderItem:t.PropTypes.func.isRequired,items:t.PropTypes.array.isRequired,defaultAllItems:t.PropTypes.bool,classPrefix:t.PropTypes.string,wrapper:t.PropTypes.any,wrapperProps:t.PropTypes.object,renderContainer:t.PropTypes.func,fuseConfig:t.PropTypes.shape({keys:t.PropTypes.array.isRequired,id:t.PropTypes.string,caseSensitive:t.PropTypes.bool,shouldSort:t.PropTypes.bool,searchFn:t.PropTypes.func,getFn:t.PropTypes.func,sortFn:t.PropTypes.func,location:t.PropTypes.number,threshold:t.PropTypes.number,distance:t.PropTypes.number,maxPatternLength:t.PropTypes.number,verbose:t.PropTypes.bool,tokenize:t.PropTypes.bool,tokenSeparator:t.PropTypes.any}).isRequired,prefilters:t.PropTypes.arrayOf(t.PropTypes.shape({regex:t.PropTypes.any.isRequired,handler:t.PropTypes.func.isRequired}).isRequired).isRequired},r.defaultProps={defaultAllItems:!0,classPrefix:"react-fuzzy-filter",wrapperProps:{},prefilters:[]},r}function i(){var t=new Vt;return{InputFilter:n(t),FilterResults:o(t)}}var s="default"in t?t["default"]:t,c="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},p=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},b=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},l=r(function(t,e){var r={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.root=r["undefined"==typeof self?"undefined":u(self)]&&self||r["undefined"==typeof window?"undefined":u(window)]&&window;var n=(r["undefined"==typeof e?"undefined":u(e)]&&e&&!e.nodeType&&e,r["undefined"==typeof t?"undefined":u(t)]&&t&&!t.nodeType&&t,r[u(c)]&&c);!n||n.global!==n&&n.window!==n||(e.root=n)}),d=e(l),y=l.root,v=Object.freeze({"default":d,root:y}),m=r(function(t,e){function r(t){return"function"==typeof t}e.isFunction=r}),S=e(m),w=m.isFunction,_=Object.freeze({"default":S,isFunction:w}),g=r(function(t,e){e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}}),O=e(g),j=g.isArray,P=Object.freeze({"default":O,isArray:j}),x=r(function(t,e){function r(t){return null!=t&&"object"===("undefined"==typeof t?"undefined":u(t))}e.isObject=r}),E=e(x),T=x.isObject,k=Object.freeze({"default":E,isObject:T}),U=r(function(t,e){e.errorObject={e:{}}}),z=e(U),M=U.errorObject,F=Object.freeze({"default":z,errorObject:M}),I=r(function(t,r){function n(){try{return i.apply(this,arguments)}catch(t){return s.errorObject.e=t,s.errorObject}}function o(t){return i=t,n}var i,s=e(F);r.tryCatch=o}),C=e(I),A=I.tryCatch,R=Object.freeze({"default":C,tryCatch:A}),L=r(function(t,e){var r=c&&c.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return r(e,t),e}(Error);e.UnsubscriptionError=n}),$=e(L),V=L.UnsubscriptionError,q=Object.freeze({"default":$,UnsubscriptionError:V}),Y=r(function(t,r){var n=e(P),o=e(k),i=e(_),s=e(R),c=e(F),a=e(q),p=function(){function t(t){this.isUnsubscribed=!1,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.isUnsubscribed){this.isUnsubscribed=!0;var r=this,u=r._unsubscribe,p=r._subscriptions;if(this._subscriptions=null,i.isFunction(u)){var h=s.tryCatch(u).call(this);h===c.errorObject&&(e=!0,(t=t||[]).push(c.errorObject.e))}if(n.isArray(p))for(var f=-1,b=p.length;++f<b;){var l=p[f];if(o.isObject(l)){var h=s.tryCatch(l.unsubscribe).call(l);if(h===c.errorObject){e=!0,t=t||[];var d=c.errorObject.e;d instanceof a.UnsubscriptionError?t=t.concat(d.errors):t.push(d)}}}if(e)throw new a.UnsubscriptionError(t)}},t.prototype.add=function(e){if(e&&e!==this&&e!==t.EMPTY){var r=e;switch("undefined"==typeof e?"undefined":u(e)){case"function":r=new t(e);case"object":if(r.isUnsubscribed||"function"!=typeof r.unsubscribe)break;this.isUnsubscribed?r.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(r);break;default:throw new Error("Unrecognized teardown "+e+" added to Subscription.")}return r}},t.prototype.remove=function(e){if(null!=e&&e!==this&&e!==t.EMPTY){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}}},t.EMPTY=function(t){return t.isUnsubscribed=!0,t}(new t),t}();r.Subscription=p}),N=e(Y),D=Y.Subscription,B=Object.freeze({"default":N,Subscription:D}),K=r(function(t,e){e.empty={isUnsubscribed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}}),W=e(K),G=K.empty,H=Object.freeze({"default":W,empty:G}),J=r(function(t,r){var n=e(v),o=n.root.Symbol;r.$$rxSubscriber="function"==typeof o&&"function"==typeof o["for"]?o["for"]("rxSubscriber"):"@@rxSubscriber"}),Q=e(J),X=J.$$rxSubscriber,Z=Object.freeze({"default":Q,$$rxSubscriber:X}),tt=r(function(t,r){var n=c&&c.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=e(_),i=e(B),s=e(H),a=e(Z),p=function(t){function e(r,n,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!r){this.destination=s.empty;break}if("object"===("undefined"==typeof r?"undefined":u(r))){r instanceof e?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new h(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new h(this,r,n,o)}}return n(e,t),e.prototype[a.$$rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.isUnsubscribed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e}(i.Subscription);r.Subscriber=p;var h=function(t){function e(e,r,n,i){t.call(this),this._parent=e;var s,c=this;o.isFunction(r)?s=r:r&&(c=r,s=r.next,n=r.error,i=r.complete,o.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this)),this._context=c,this._next=s,this._error=n,this._complete=i}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parent;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parent;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){if(!this.isStopped){var t=this._parent;this._complete?t.syncErrorThrowable?(this.__tryOrSetError(t,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(r){throw this.unsubscribe(),r}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(n){return t.syncErrorValue=n,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parent;this._context=null,this._parent=null,t.unsubscribe()},e}(p)}),et=e(tt),rt=tt.Subscriber,nt=Object.freeze({"default":et,Subscriber:rt}),ot=r(function(t,r){function n(t,e,r){if(t){if(t instanceof o.Subscriber)return t;if(t[i.$$rxSubscriber])return t[i.$$rxSubscriber]()}return t||e||r?new o.Subscriber(t,e,r):new o.Subscriber}var o=e(nt),i=e(Z);r.toSubscriber=n}),it=e(ot),st=ot.toSubscriber,ct=Object.freeze({"default":it,toSubscriber:st}),ut=r(function(t,e){function r(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r}),at=e(ut),pt=Object.freeze({"default":at}),ht=r(function(t,r){function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var o=e(pt),i=n(o),s=void 0;"undefined"!=typeof c?s=c:"undefined"!=typeof window&&(s=window);var u=(0,i["default"])(s);r["default"]=u}),ft=e(ht),bt=Object.freeze({"default":ft}),lt=r(function(t){t.exports=e(bt)}),dt=e(lt),yt=Object.freeze({"default":dt}),vt=r(function(t,r){var n=e(v),o=e(ct),i=e(yt),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=o.toSubscriber(t,e,r);if(n?n.call(i,this):i.add(this._subscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype.forEach=function(t,e){var r=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o=r.subscribe(function(e){if(o)try{t(e)}catch(r){n(r),o.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i["default"]]=function(){return this},t.create=function(e){return new t(e)},t}();r.Observable=s}),mt=e(vt),St=vt.Observable,wt=Object.freeze({"default":mt,Observable:St}),_t=r(function(t,e){var r=c&&c.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},n=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.ObjectUnsubscribedError=n}),gt=e(_t),Ot=_t.ObjectUnsubscribedError,jt=Object.freeze({"default":gt,ObjectUnsubscribedError:Ot}),Pt=r(function(t,r){var n=c&&c.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=e(B),i=function(t){function e(e,r){t.call(this),this.subject=e,this.subscriber=r,this.isUnsubscribed=!1}return n(e,t),e.prototype.unsubscribe=function(){if(!this.isUnsubscribed){this.isUnsubscribed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.isUnsubscribed){var r=e.indexOf(this.subscriber);r!==-1&&e.splice(r,1)}}},e}(o.Subscription);r.SubjectSubscription=i}),xt=e(Pt),Et=Pt.SubjectSubscription,Tt=Object.freeze({"default":xt,SubjectSubscription:Et}),kt=r(function(t,r){var n=c&&c.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=e(wt),i=e(nt),s=e(B),u=e(jt),a=e(Tt),p=e(Z),h=function(t){function e(e){t.call(this,e),this.destination=e}return n(e,t),e}(i.Subscriber);r.SubjectSubscriber=h;var f=function(t){function e(){t.call(this),this.observers=[],this.isUnsubscribed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(e,t),e.prototype[p.$$rxSubscriber]=function(){return new h(this)},e.prototype.lift=function(t){var e=new b(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.isUnsubscribed)throw new u.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].next(t)},e.prototype.error=function(t){if(this.isUnsubscribed)throw new u.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.isUnsubscribed)throw new u.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.isUnsubscribed=!0,this.observers=null},e.prototype._subscribe=function(t){if(this.isUnsubscribed)throw new u.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new a.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},e.create=function(t,e){return new b(t,e)},e}(o.Observable);r.Subject=f;var b=function(t){function e(e,r){t.call(this),this.destination=e,this.source=r}return n(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var e=this.source;return e?this.source.subscribe(t):s.Subscription.EMPTY},e}(f);r.AnonymousSubject=b}),Ut=e(kt),zt=kt.AnonymousSubject,Mt=kt.Subject,Ft=kt.SubjectSubscriber,It=Object.freeze({"default":Ut,AnonymousSubject:zt,Subject:Mt,SubjectSubscriber:Ft}),Ct=r(function(t,e){function r(t){throw t}e.throwError=r}),At=e(Ct),Rt=Ct.throwError,Lt=Object.freeze({"default":At,throwError:Rt}),$t=r(function(t,r){var n=c&&c.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=e(It),i=e(Lt),s=e(jt),u=function(t){function e(e){t.call(this),this._value=e}return n(e,t),e.prototype.getValue=function(){if(this.hasError)i.throwError(this.thrownError);else{if(!this.isUnsubscribed)return this._value;i.throwError(new s.ObjectUnsubscribedError)}},Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return r&&!r.isUnsubscribed&&e.next(this._value),r},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(o.Subject);r.BehaviorSubject=u});e($t);var Vt=$t.BehaviorSubject,qt=r(function(t){function e(){return(new Date).getTime()}t.exports=Date.now||e}),Yt=e(qt),Nt=Object.freeze({"default":Yt}),Dt=r(function(t){var r=e(Nt);t.exports=function(t,e,n){function o(){var p=r()-u;p<e&&p>0?i=setTimeout(o,e-p):(i=null,n||(a=t.apply(c,s),i||(c=s=null)))}var i,s,c,u,a;return null==e&&(e=100),function(){c=this,s=arguments,u=r();var p=n&&!i;return i||(i=setTimeout(o,e)),p&&(a=t.apply(c,s),c=s=null),a}}}),Bt=e(Dt),Kt=r(function(t,e){!function(r){function n(){console.log.apply(console,arguments)}function o(t,e){var r,n,o,i;for(this.list=t,this.options=e=e||{},r=0,i=["sort","shouldSort","verbose","tokenize"],n=i.length;r<n;r++)o=i[r],this.options[o]=o in e?e[o]:a[o];for(r=0,i=["searchFn","sortFn","keys","getFn","include","tokenSeparator"],n=i.length;r<n;r++)o=i[r],this.options[o]=e[o]||a[o]}function i(t,e,r){var n,o,c,u,a,p;if(e){if(c=e.indexOf("."),c!==-1?(n=e.slice(0,c),o=e.slice(c+1)):n=e,u=t[n],null!==u&&void 0!==u)if(o||"string"!=typeof u&&"number"!=typeof u)if(s(u))for(a=0,p=u.length;a<p;a++)i(u[a],o,r);else o&&i(u,o,r);else r.push(u)}else r.push(t);return r}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t,e){e=e||{},this.options=e,this.options.location=e.location||c.defaultOptions.location,this.options.distance="distance"in e?e.distance:c.defaultOptions.distance,this.options.threshold="threshold"in e?e.threshold:c.defaultOptions.threshold,this.options.maxPatternLength=e.maxPatternLength||c.defaultOptions.maxPatternLength,this.pattern=e.caseSensitive?t:t.toLowerCase(),this.patternLen=t.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var a={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:c,sortFn:function(t,e){return t.score-e.score},getFn:i,keys:[],verbose:!1,tokenize:!1,tokenSeparator:/ +/g};o.VERSION="2.3.0",o.prototype.set=function(t){return this.list=t,t},o.prototype.search=function(t){this.options.verbose&&n("\nSearch term:",t,"\n"),this.pattern=t,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var e=this._format();return e},o.prototype._prepareSearchers=function(){var t=this.options,e=this.pattern,r=t.searchFn,n=e.split(t.tokenSeparator),o=0,i=n.length;if(this.options.tokenize)for(this.tokenSearchers=[];o<i;o++)this.tokenSearchers.push(new r(n[o],t));this.fullSeacher=new r(e,t)},o.prototype._startSearch=function(){var t,e,r,n,o=this.options,i=o.getFn,s=this.list,c=s.length,u=this.options.keys,a=u.length,p=null;if("string"==typeof s[0])for(r=0;r<c;r++)this._analyze("",s[r],r,r);else for(this._keyMap={},r=0;r<c;r++)for(p=s[r],n=0;n<a;n++){if(t=u[n],"string"!=typeof t){if(e=1-t.weight||1,this._keyMap[t.name]={weight:e},t.weight<=0||t.weight>1)throw new Error("Key weight has to be > 0 and <= 1");t=t.name}else this._keyMap[t]={weight:1};this._analyze(t,i(p,t,[]),p,r)}},o.prototype._analyze=function(t,e,r,o){var i,c,u,a,p,h,f,b,l,d,y,v,m,S=this.options,w=!1;if(void 0!==e&&null!==e)if(c=[],"string"==typeof e){if(i=e.split(S.tokenSeparator),S.verbose&&n("---------\nKey:",t),S.verbose&&n("Record:",i),this.options.tokenize){for(v=0;v<this.tokenSearchers.length;v++){for(b=this.tokenSearchers[v],l=[],m=0;m<i.length;m++)d=i[m],y=b.search(d),y.isMatch?(w=!0,l.push(y.score),c.push(y.score)):(l.push(1),c.push(1));S.verbose&&n("Token scores:",l)}for(a=c[0],h=c.length,v=1;v<h;v++)a+=c[v];a/=h,S.verbose&&n("Token score average:",a)}f=this.fullSeacher.search(e),S.verbose&&n("Full text score:",f.score),p=f.score,void 0!==a&&(p=(p+a)/2),S.verbose&&n("Score average:",p),(w||f.isMatch)&&(u=this.resultMap[o],u?u.output.push({key:t,score:p,matchedIndices:f.matchedIndices}):(this.resultMap[o]={item:r,output:[{key:t,score:p,matchedIndices:f.matchedIndices}]},this.results.push(this.resultMap[o])))}else if(s(e))for(v=0;v<e.length;v++)this._analyze(t,e[v],r,o)},o.prototype._computeScore=function(){var t,e,r,o,i,s,c,u,a,p=this._keyMap,h=this.results;for(this.options.verbose&&n("\n\nComputing score:\n"),t=0;t<h.length;t++){for(r=0,o=h[t].output,i=o.length,u=1,e=0;e<i;e++)s=o[e].score,c=p?p[o[e].key].weight:1,a=s*c,1!==c?u=Math.min(u,a):(r+=a,o[e].nScore=a);1===u?h[t].score=r/i:h[t].score=u,this.options.verbose&&n(h[t])}},o.prototype._sort=function(){var t=this.options;t.shouldSort&&(t.verbose&&n("\n\nSorting...."),this.results.sort(t.sortFn))},o.prototype._format=function(){var t,e,r,o,i,s=this.options,c=s.getFn,u=[],a=this.results,p=s.include;for(s.verbose&&n("\n\nOutput:\n\n",a),o=s.id?function(t){a[t].item=c(a[t].item,s.id,[])[0]}:function(){},i=function(t){var e,r,n,o,i,s=a[t];if(p.length>0){if(e={item:s.item},p.indexOf("matches")!==-1)for(n=s.output,e.matches=[],r=0;r<n.length;r++)o=n[r],i={indices:o.matchedIndices},o.key&&(i.key=o.key),e.matches.push(i);p.indexOf("score")!==-1&&(e.score=a[t].score)}else e=s.item;return e},e=0,r=a.length;e<r;e++)o(e),t=i(e),u.push(t);return u},c.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},c.prototype._calculatePatternAlphabet=function(){var t={},e=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]=0;for(e=0;e<this.patternLen;e++)t[this.pattern.charAt(e)]|=1<<this.pattern.length-e-1;return t},c.prototype._bitapScore=function(t,e){var r=t/this.patternLen,n=Math.abs(this.options.location-e);return this.options.distance?r+n/this.options.distance:n?1:r},c.prototype.search=function(t){var e,r,n,o,i,s,c,u,a,p,h,f,b,l,d,y,v,m,S,w,_,g,O=this.options;if(t=O.caseSensitive?t:t.toLowerCase(),this.pattern===t)return{isMatch:!0,score:0,matchedIndices:[[0,t.length-1]]};if(this.patternLen>O.maxPatternLength){if(v=t.match(new RegExp(this.pattern.replace(O.tokenSeparator,"|"))),m=!!v)for(w=[],e=0,_=v.length;e<_;e++)g=v[e],w.push([t.indexOf(g),g.length-1]);return{isMatch:m,score:m?.5:1,matchedIndices:w}}for(o=O.location,n=t.length,i=O.threshold,s=t.indexOf(this.pattern,o),S=[],e=0;e<n;e++)S[e]=0;for(s!=-1&&(i=Math.min(this._bitapScore(0,s),i),s=t.lastIndexOf(this.pattern,o+this.patternLen),s!=-1&&(i=Math.min(this._bitapScore(0,s),i))),s=-1,d=1,y=[],a=this.patternLen+n,e=0;e<this.patternLen;e++){for(c=0,u=a;c<u;)this._bitapScore(e,o+u)<=i?c=u:a=u,u=Math.floor((a-c)/2+c);for(a=u,p=Math.max(1,o-u+1),h=Math.min(o+u,n)+this.patternLen,f=Array(h+2),f[h+1]=(1<<e)-1,r=h;r>=p;r--)if(l=this.patternAlphabet[t.charAt(r-1)],l&&(S[r-1]=1),0===e?f[r]=(f[r+1]<<1|1)&l:f[r]=(f[r+1]<<1|1)&l|((b[r+1]|b[r])<<1|1)|b[r+1],f[r]&this.matchmask&&(d=this._bitapScore(e,r-1),d<=i)){if(i=d,s=r-1,y.push(s),!(s>o))break;p=Math.max(1,2*o-s)}if(this._bitapScore(e+1,o)>i)break;b=f}return w=this._getMatchedIndices(S),{isMatch:s>=0,score:0===d?.001:d,matchedIndices:w}},c.prototype._getMatchedIndices=function(t){for(var e,r=[],n=-1,o=-1,i=0,s=t.length;i<s;i++)e=t[i],e&&n===-1?n=i:e||n===-1||(o=i-1,r.push([n,o]),n=-1);return t[i-1]&&r.push([n,i-1]),r},"object"===("undefined"==typeof e?"undefined":u(e))?t.exports=o:"function"==typeof define&&define.amd?define(function(){return o}):r.Fuse=o}(c)}),Wt=e(Kt);return i});
